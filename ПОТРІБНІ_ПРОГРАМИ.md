# Потрібні програми для HataCRM

Список усього ПЗ, необхідного для розробки та запуску проєкту.

---

## 1. Node.js (обовʼязково)

- **Навіщо:** запуск бекенду (`node src/index.js`), npm-пакети, міграції, скрипти.
- **Встановити:** https://nodejs.org/ — варіант LTS.
- **Перевірка:** у терміналі виконати:
  ```bash
  node -v
  npm -v
  ```
  Мають зʼявитися версії (наприклад `v20.x.x` та `10.x.x`).

---

## 2. PostgreSQL (обовʼязково для повної роботи)

- **Навіщо:** база даних (броні, клієнти, квартири, платежі, аналітика).
- **Встановити:** https://www.postgresql.org/download/windows/
  - Під час встановлення можна задати порт **5433** (як у `.env`) або стандартний 5432 — тоді в `.env` вказуй відповідний порт.
- **Після встановлення:** створити базу та користувача (як у `.env`):
  ```sql
  CREATE USER hata_user WITH PASSWORD 'hata_password';
  CREATE DATABASE hata_db OWNER hata_user;
  ```
- **Перевірка:** служба PostgreSQL запущена; підключення з проєкту перевіряється командою:
  ```bash
  node src/run_migration.js
  ```
  Якщо база доступна — у консолі буде «Migration successful!».

**Альтернатива:** якщо база вже на сервері — у `.env` вказати `DATABASE_URL` на серверну БД (хост, порт, користувач, пароль, імʼя БД). Тоді локально PostgreSQL ставити не обовʼязково.

---

## 3. Git (рекомендовано)

- **Навіщо:** версіонування коду, деплой, бекопи.
- **Встановити:** https://git-scm.com/download/win
- **Перевірка:** `git --version`

---

## 4. SSH та SCP (для деплою на сервер)

- **Навіщо:** скрипт `deploy.ps1` копіює файли на сервер через `scp`/`ssh`.
- **Windows:** зазвичай вже є в Windows 10/11 (OpenSSH). Якщо ні — «Параметри» → «Додатки» → «Опційні можливості» → додати клієнт OpenSSH.
- **Перевірка:** `ssh -V` та `scp` у терміналі.

---

## 5. PM2 (тільки на сервері)

- **Навіщо:** постійна робота бекенду після деплою (`pm2 restart hata-crm`).
- **Встановити на сервері:** `npm install -g pm2`
- Локально для розробки не потрібен — достатньо `npm start`.

---

## Швидка перевірка (локально)

У папці проєкту:

```bash
npm install
node -e "require('./src/db').query('SELECT 1').then(()=>console.log('DB OK')).catch(e=>console.log('DB:', e.message))"
node src/run_migration.js
npm start
```

- `npm install` — встановить залежності.
- Другий рядок — перевірка підключення до БД.
- Третій — виконання міграції (таблиці + опційно перенос даних).
- Четвертий — запуск сервера; у браузері відкрити http://localhost:3000.

---

## Підсумок

| Програма      | Де потрібна | Посилання / команда        |
|---------------|------------|----------------------------|
| Node.js (LTS) | Локально   | https://nodejs.org/        |
| PostgreSQL    | Локально або сервер | https://www.postgresql.org/download/windows/ |
| Git           | Рекомендовано | https://git-scm.com/    |
| SSH/SCP       | Для деплою | Зазвичай є в Windows       |
| PM2           | На сервері | `npm install -g pm2`       |

Файл `.env` не комітиться; його треба створити вручну і вказати `DATABASE_URL`, `PORT`, та за потреби змінні для деплою та Wix.
