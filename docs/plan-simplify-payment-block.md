# План: спрощення блоку «Підтвердження оплати» в картці броні

## Проблема зараз

У картці клієнта в блоці оплати одночасно є **три елементи керування/статусу**:

1. **Перемикач** «Оплачено (враховується в аналітиці)» — керує `full_amount_paid`
2. **Рядок** «Передплата внесена:» — бейдж + кнопка «Підтвердити передплату» — керує `prepayment_paid`
3. **Рядок** «Основна сума сплачена:» — бейдж + кнопка «Підтвердити оплату» — теж керує `full_amount_paid`

Наслідок: **незрозуміло, що саме потрапляє в аналітику**. Перемикач і рядок «Основна сума сплачена» дублюють один і той самий факт (оплачено повністю), тому виглядає як «три кнопки» і неочевидно, які з них впливають на дохід.

---

## Мета

- Залишити **одне чітке керування** для «враховується в аналітиці».
- Чітко розділити: **що впливає на аналітику** і **що лише для обліку передплати** (не впливає на дохід у звітах).

---

## Що змінити

### 1. Залишити один контроль «оплачено для аналітики»

- **Зберегти** лише перемикач з підписом на кшталт:  
  **«Оплачено (враховується в аналітиці)»**
- **Прибрати** рядок «Основна сума сплачена» і кнопку «Підтвердити оплату» з інтерфейсу (в БД поле `full_amount_paid` лишається, його змінює тільки перемикач).

Результат: для аналітики є **одна** дія — увімкнути/вимкнути перемикач. Більше ніякі «кнопки оплати» на це не впливають.

### 2. Блок «Передплата» — тільки для обліку, не для аналітики

- **Залишити** один рядок: «Передплата внесена:» + бейдж (Оплачено / Не оплачено / —) + кнопка «Підтвердити передплату» (коли передплата є і ще не підтверджена).
- Додати **короткий підпис** під цим рядком або біля секції, наприклад:  
  **«На дохід у розділі Аналітика впливає лише перемикач вище»** або  
  **«Передплата — тільки для обліку, не змінює дохід у звітах»**.

Так буде зрозуміло: перемикач = аналітика, передплата = окремий статус без впливу на звіти.

### 3. Підсумкова структура блоку (після змін)

```
Підтвердження оплати

  Оплачено (враховується в аналітиці):  [перемикач]

  [опційно підпис: "Лише цей перемикач визначає, чи враховується бронь у доходах в розділі Аналітика."]

  Передплата внесена:  [бейдж]  [кнопка "Підтвердити передплату"]   ← тільки якщо є сума передплати
  (не впливає на аналітику)
```

Елементів керування залишиться **два**: перемикач + (за потреби) одна кнопка «Підтвердити передплату». Рядок «Основна сума сплачена» і друга кнопка зникають.

---

## Технічні кроки

| Крок | Файл | Дія |
|------|------|-----|
| 1 | [public/index.html](public/index.html) | Видалити блок з «Основна сума сплачена», `detFullAmountStatus`, `btnConfirmFullAmount`. Залишити перемикач і блок передплати. За потреби додати підпис-підказку під перемикачем. |
| 2 | [public/js/app.js](public/js/app.js) | У `openBookingDetails`: прибрати зміну `fullStatusEl` та `btnFull` (елементів більше не буде). Перемикач лишається єдиним, хто змінює `full_amount_paid`. У `setupPaymentConfirmButtons` прибрати обробник для «Підтвердити оплату» (кнопку видалено); лишити лише логіку для кнопки передплати. |
| 3 | Перевірка | Відкрити картку броні: один перемикач «Оплачено (враховується в аналітиці)», один рядок «Передплата внесена» з кнопкою (якщо є передплата). Аналітика як і раніше рахує лише броні з `full_amount_paid = true` (керується перемикачем). |

---

## Результат

- **Одна** зрозуміла дія для аналітики: увімкнути «Оплачено (враховується в аналітиці)».
- Передплата окремо, з явним підписом, що на аналітику не впливає.
- Немає дублювання між перемикачем і кнопкою «Підтвердити оплату», інтерфейс не виглядає як «три кнопки» з незрозумілим призначенням.
